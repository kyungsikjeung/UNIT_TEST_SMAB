# Ultra Light Scheduler - Driver ë™ì  ë“±ë¡ ì‹œìŠ¤í…œ ìƒ˜í”Œ

## ğŸ“‹ ê°œìš”

ì´ ìƒ˜í”Œ í”„ë¡œì íŠ¸ëŠ” `driver_design_guide.md`ì—ì„œ ì„¤ëª…í•œ **Ultra Light Schedulerì˜ ë“œë¼ì´ë²„ ë™ì  ë“±ë¡ ì‹œìŠ¤í…œ**ì„ ì‹¤ì œë¡œ êµ¬í˜„í•œ ì™„ì „í•œ ì˜ˆì œì…ë‹ˆë‹¤.

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
sample_project/
â”œâ”€â”€ drivers/                    # ë“œë¼ì´ë²„ ëª¨ë“ˆë“¤
â”‚   â”œâ”€â”€ driver_manager.h        # ë“œë¼ì´ë²„ ë§¤ë‹ˆì € ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ driver_manager.c        # ë“œë¼ì´ë²„ ë§¤ë‹ˆì € êµ¬í˜„
â”‚   â”œâ”€â”€ led_driver.h            # LED ë“œë¼ì´ë²„ ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ led_driver.c            # LED ë“œë¼ì´ë²„ êµ¬í˜„
â”‚   â”œâ”€â”€ button_driver.h         # ë²„íŠ¼ ë“œë¼ì´ë²„ ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ button_driver.c         # ë²„íŠ¼ ë“œë¼ì´ë²„ êµ¬í˜„
â”‚   â”œâ”€â”€ adc_driver.h            # ADC ì„¼ì„œ ë“œë¼ì´ë²„ ì¸í„°í˜ì´ìŠ¤
â”‚   â””â”€â”€ adc_driver.c            # ADC ì„¼ì„œ ë“œë¼ì´ë²„ êµ¬í˜„
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ full_example.ino        # ì™„ì „í•œ í†µí•© ì˜ˆì œ
â””â”€â”€ README.md                   # ì´ íŒŒì¼
```

## ğŸ”§ í¬í•¨ëœ ë“œë¼ì´ë²„ë“¤

### 1. LED Driver (10ms ì£¼ê¸°)
- **ê¸°ëŠ¥**: ë‚´ì¥ LED ê¹œë¹¡ì„ ì œì–´
- **íŠ¹ì§•**: 
  - ê¹œë¹¡ì„ ì†ë„ ì¡°ì ˆ ê°€ëŠ¥
  - ìˆ˜ë™ ëª¨ë“œ/ìë™ ê¹œë¹¡ì„ ëª¨ë“œ ì „í™˜
  - ì‹¤ì‹œê°„ ìƒíƒœ ë³€ê²½

### 2. Button Driver (10ms ì£¼ê¸°)
- **ê¸°ëŠ¥**: ë²„íŠ¼ ì…ë ¥ ë° ë””ë°”ìš´ìŠ¤ ì²˜ë¦¬
- **íŠ¹ì§•**:
  - í•˜ë“œì›¨ì–´ ë””ë°”ìš´ìŠ¤ (30ms)
  - ë²„íŠ¼ ì´ë²¤íŠ¸ ì½œë°±
  - ëˆ„ë¦„ íšŸìˆ˜ ì¹´ìš´íŒ…
  - ì—ì§€ ê²€ì¶œ (ëˆ„ë¦„/ë–¼ì–´ì§)

### 3. ADC Driver (50ms ì£¼ê¸°)
- **ê¸°ëŠ¥**: ì•„ë‚ ë¡œê·¸ ì„¼ì„œ ê°’ ì½ê¸° ë° ì „ì•• ë³€í™˜
- **íŠ¹ì§•**:
  - 10ë¹„íŠ¸ ADC ê°’ì„ ì „ì••ìœ¼ë¡œ ë³€í™˜
  - ì°¸ì¡° ì „ì•• ì„¤ì • ê°€ëŠ¥
  - ì‹¤ì‹œê°„ ë¡œê¹…
  - í†µê³„ ì •ë³´ ì œê³µ

## ğŸ”Œ í•˜ë“œì›¨ì–´ ì—°ê²°

### Arduino Uno ê¸°ì¤€:

```
LED:
  - ë‚´ì¥ LED (LED_BUILTIN, í•€ 13) ì‚¬ìš©
  - ë³„ë„ ì—°ê²° ë¶ˆí•„ìš”

Button:
  - ë””ì§€í„¸ í•€ 2
  - í•œìª½ì€ GND, í•œìª½ì€ í•€ 2ì— ì—°ê²°
  - ë‚´ë¶€ í’€ì—… ì €í•­ ì‚¬ìš© (INPUT_PULLUP)

ADC Sensor:
  - ì•„ë‚ ë¡œê·¸ í•€ A0
  - ê°€ë³€ì €í•­, ì˜¨ë„ì„¼ì„œ, ê´‘ì„¼ì„œ ë“± ì—°ê²° ê°€ëŠ¥
  - 0-5V ë²”ìœ„ì˜ ì•„ë‚ ë¡œê·¸ ì‹ í˜¸
```

### ì—°ê²° ì˜ˆì‹œ:
```
Arduino Uno
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Digital Pin 2   â”‚â”€â”€â”€â”€ Button â”€â”€â”€â”€ GND
    â”‚ Analog Pin A0   â”‚â”€â”€â”€â”€ Sensor Signal
    â”‚ Built-in LED    â”‚ (Pin 13, ìë™)
    â”‚ GND             â”‚â”€â”€â”€â”€ Common Ground
    â”‚ 5V              â”‚â”€â”€â”€â”€ Sensor Power (í•„ìš”ì‹œ)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. Arduino IDE ì„¤ì •
1. Arduino IDEì—ì„œ `examples/full_example.ino` íŒŒì¼ ì—´ê¸°
2. `drivers/` í´ë”ì˜ ëª¨ë“  íŒŒì¼ë“¤ì„ ìŠ¤ì¼€ì¹˜ì™€ ê°™ì€ í´ë”ì— ë³µì‚¬
3. ì»´íŒŒì¼ ë° ì—…ë¡œë“œ

### 2. ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„° ì‚¬ìš©
- **ë³´ë ˆì´íŠ¸**: 57600
- **ì„¤ì •**: No line ending ë˜ëŠ” Newline

### 3. ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´

```
help        - ë„ì›€ë§ í‘œì‹œ
drivers     - ë“±ë¡ëœ ë“œë¼ì´ë²„ ëª©ë¡ ì¶œë ¥
led on      - LED ì¼œê¸° (ìˆ˜ë™ ëª¨ë“œ)
led off     - LED ë„ê¸° (ìˆ˜ë™ ëª¨ë“œ)
led blink   - ê¹œë¹¡ì„ ëª¨ë“œë¡œ ì „í™˜
led fast    - ë¹ ë¥¸ ê¹œë¹¡ì„ (100ms)
led slow    - ëŠë¦° ê¹œë¹¡ì„ (1000ms)
adc         - ADC í†µê³„ ì •ë³´ ì¶œë ¥
button      - ë²„íŠ¼ ìƒíƒœ ì •ë³´ ì¶œë ¥
reset       - ë²„íŠ¼ ì¹´ìš´í„° ë¦¬ì…‹
status      - ì‹œìŠ¤í…œ ìƒíƒœ ì¶œë ¥
```

## ğŸ“Š ì˜ˆìƒ ì¶œë ¥ ì˜ˆì‹œ

### ì‹œì‘ ì‹œ:
```
========================================
Ultra Light Scheduler - Driver Example
========================================

[TIMER] 1ms timer initialized

--- Registering Drivers ---
[DRV] Registering 'LED' @ 10ms - OK
[LED] Driver initialized - Blink mode @ 500ms
[DRV] Registering 'Button' @ 10ms - OK
[BTN] Driver initialized - Pin 2
[DRV] Registering 'ADC' @ 50ms - OK
[ADC] Driver initialized - Pin A0, Ref: 5.0V

===== Driver List =====
Total: 3 / 16
[0] LED - 10ms - ENABLED - INIT OK
[1] Button - 10ms - ENABLED - INIT OK
[2] ADC - 50ms - ENABLED - INIT OK
=======================

--- System Ready ---
Type 'help' for available commands
```

### ì‹¤í–‰ ì¤‘ ë¡œê·¸:
```
[ADC] Raw: 512, Voltage: 2.500V, Samples: 45

>>> BUTTON PRESSED <<<
[BTN] PRESSED (count: 1)
Current ADC: 2.500V
[LED] Blink rate set to 100 ms
System uptime: 23 seconds
Button press count: 1

>>> BUTTON RELEASED <<<
[BTN] RELEASED
[LED] Blink rate set to 500 ms
```

## ğŸ› ï¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ìƒˆë¡œìš´ ë“œë¼ì´ë²„ ì¶”ê°€

1. **í—¤ë” íŒŒì¼ ìƒì„±** (`my_driver.h`):
```c
#ifndef MY_DRIVER_H
#define MY_DRIVER_H

int my_driver_init(void);
void my_driver_task(void);
// ì¶”ê°€ API í•¨ìˆ˜ë“¤...

#endif
```

2. **êµ¬í˜„ íŒŒì¼ ìƒì„±** (`my_driver.c`):
```c
#include "my_driver.h"
#include <Arduino.h>

int my_driver_init(void) {
    // ì´ˆê¸°í™” ì½”ë“œ
    return 0;
}

void my_driver_task(void) {
    // ì£¼ê¸°ì  ì‹¤í–‰ ì½”ë“œ
}
```

3. **ë©”ì¸ ì½”ë“œì—ì„œ ë“±ë¡**:
```c
#include "my_driver.h"

void setup() {
    // ...
    driver_register("MyDriver", my_driver_init, my_driver_task, 10);
}
```

### ì„¤ì • ë³€ê²½

#### ë²„íŠ¼ í•€ ë³€ê²½:
```c
// button_driver.c íŒŒì¼ ìƒë‹¨ì—
#define BUTTON_PIN 3  // ê¸°ë³¸ê°’: 2
```

#### ADC í•€ ë³€ê²½:
```c
// adc_driver.c íŒŒì¼ ìƒë‹¨ì—
#define ADC_PIN A1  // ê¸°ë³¸ê°’: A0
```

#### ìµœëŒ€ ë“œë¼ì´ë²„ ìˆ˜ ë³€ê²½:
```c
// driver_manager.c íŒŒì¼ ìƒë‹¨ì—
#define MAX_DRIVERS 32  // ê¸°ë³¸ê°’: 16
```

## ğŸ“ˆ ì„±ëŠ¥ ì •ë³´

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (Arduino Uno ê¸°ì¤€):
- **Flash**: ì•½ 8KB
- **SRAM**: ì•½ 600 bytes
- **ë“œë¼ì´ë²„ë‹¹ ì¶”ê°€**: ì•½ 20-50 bytes

### CPU ì‚¬ìš©ë¥ :
- **1ms ì¸í„°ëŸ½íŠ¸**: <1%
- **10ms íƒœìŠ¤í¬ë“¤**: <2%
- **50ms íƒœìŠ¤í¬ë“¤**: <1%

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. ì»´íŒŒì¼ ì—ëŸ¬
- ëª¨ë“  `.h` ë° `.c` íŒŒì¼ì´ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ìˆëŠ”ì§€ í™•ì¸
- Arduino IDEì—ì„œ ìŠ¤ì¼€ì¹˜ í´ë” êµ¬ì¡° í™•ì¸

### 2. ë“œë¼ì´ë²„ ë“±ë¡ ì‹¤íŒ¨
```
[DRV] ERROR: Driver slots full
```
â†’ `MAX_DRIVERS` ê°’ì„ ì¦ê°€ì‹œí‚¤ì„¸ìš”

### 3. ë²„íŠ¼ì´ ë°˜ì‘í•˜ì§€ ì•ŠìŒ
- í•€ 2ì— ì˜¬ë°”ë¥´ê²Œ ì—°ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸
- í’€ì—… ì €í•­ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸ (ë²„íŠ¼ì„ ëˆ„ë¥´ì§€ ì•Šì•˜ì„ ë•Œ HIGH)

### 4. ADC ê°’ì´ ì´ìƒí•¨
- A0 í•€ì— ì„¼ì„œê°€ ì˜¬ë°”ë¥´ê²Œ ì—°ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸
- ì°¸ì¡° ì „ì••(5V) ì„¤ì •ì´ ë§ëŠ”ì§€ í™•ì¸

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [`driver_design_guide.md`](../driver_design_guide.md) - ì„¤ê³„ ê°€ì´ë“œ ë° ìƒì„¸ API ë¬¸ì„œ
- Ultra Light Scheduler ë©”ì¸ ë¬¸ì„œ

## ğŸ“ ë¼ì´ì„¼ìŠ¤

ì´ ìƒ˜í”Œ ì½”ë“œëŠ” êµìœ¡ ë° ì°¸ê³  ëª©ì ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤.

---

**ë§Œë“ ì´**: Ultra Light Scheduler ê°œë°œíŒ€  
**ì—…ë°ì´íŠ¸**: 2025ë…„ 11ì›”